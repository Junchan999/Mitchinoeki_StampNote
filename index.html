<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>道の駅Webスタンプ帳</title>
    <!-- Leaflet CSS for map display -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    <!-- Leaflet Routing Machine CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <!-- Custom styles -->
    <link rel="stylesheet" href="style160.css">
</head>
<body>
    <h1>道の駅Webスタンプ帳 Ver1.60</h1>

    <div class="container">
        <div class="control-panel-container"> <!-- 左ペインをコントロールパネルとして再構築 -->
            <div class="tabs-header">
                <button class="tab-button active" id="stationInfoTabButton">道の駅情報</button>
                <button class="tab-button" id="routeCreationTabButton">ルート作成</button>
            </div>
            
            <div id="stationInfoTabContent" class="tab-content active">
                <h2>道の駅情報 <span id="achievementRate">(0/0) 達成率0%</span></h2>
                <div class="tab-section">
                    <label for="csvFileInput">道の駅CSVを選択: </label>
                    <input type="file" id="csvFileInput" accept=".csv">
                    <button id="saveCsvButton" disabled>編集内容をCSVで保存</button>
                </div>
                <div class="tab-section">
                    <label for="stationDropdown">道の駅を選択: </label>
                    <select id="stationDropdown" disabled>
                        <option value="">--- CSVファイルを読み込んでください ---</option>
                    </select>
                    <button id="toggleStationMarkersButton" disabled>道の駅マーカーを非表示</button> <!-- 新しいボタン -->
                </div>
                <div id="stationDetailsDisplay">
                    <p>選択された道の駅の情報がここに表示されます。</p>
                </div>
                <div class="action-buttons-for-details">
                    <!-- 編集/保存/キャンセルボタンがここに挿入されます (ルート関連ボタンは削除) -->
                </div>
            </div>

            <div id="routeCreationTabContent" class="tab-content">
                <h2>ルート作成</h2>
                <div class="tab-section">
                    <label for="routeCsvFileInput">ルートCSVを読込: </label>
                    <input type="file" id="routeCsvFileInput" accept=".csv">
                    <button id="loadRouteCsvButton" disabled>ルートを読込</button>
                </div>
                <div class="tab-section map-mode-buttons"> <!-- グループ化のために新しいクラスを追加 -->
                    <button id="setStartModeButton" disabled>出発地点に設定</button>
                    <button id="clearStartPointButton" disabled class="clear-route-point-button">解除</button> <!-- 追加 -->
                </div>
                <div class="tab-section map-mode-buttons"> <!-- グループ化のために新しいクラスを追加 -->
                    <button id="setEndModeButton" disabled>終了地点に設定</button>
                    <button id="clearEndPointButton" disabled class="clear-route-point-button">解除</button> <!-- 追加 -->
                </div>
                <div class="tab-section map-mode-buttons"> <!-- グループ化のために新しいクラスを追加 -->
                    <button id="setWaypointModeButton" disabled>経由地として地図で選択</button>
                    <button id="clearIntermediateWaypointsButton" disabled class="clear-route-point-button">全解除</button> <!-- 追加 -->
                </div>
                <div class="tab-section">
                    <button id="addSelectedStationAsWaypointButton" disabled>選択中の道の駅を中継地点に追加</button>
                </div>

                <!-- 中継地点/経由地のリスト表示を追加 -->
                <div class="tab-section intermediate-waypoints-list-section"> <!-- 専用のクラスを追加 -->
                    <h3>現在の中継地点/経由地</h3>
                    <ul id="intermediateWaypointsList">
                        <li class="placeholder-item">現在、中継地点/経由地はありません。</li>
                    </ul>
                </div>

                <div class="tab-section">
                    <label for="averageSpeedInput">走行時速(km/h): </label>
                    <input type="number" id="averageSpeedInput" value="40" min="1" step="1">
                </div>
                <div class="tab-section">
                    <label for="defaultStayTimeInput">滞在時間(分/中継点): </label>
                    <input type="number" id="defaultStayTimeInput" value="30" min="0" step="1">
                </div>
                <div class="tab-section route-action-buttons">
                    <button id="clearRouteButton" disabled>ルートをクリア</button>
                    <button id="showRouteListButton" disabled>ルート一覧を表示 (別ウィンドウ)</button>
                    <button id="printRouteListButton" disabled>ルート一覧を印刷</button>
                    <button id="saveRouteCsvButton" disabled>ルートをCSVで保存</button>
                </div>
            </div>
            <button id="showManualButton" class="manual-button">取扱説明書</button>
        </div>
        <div class="map-container">
            <h2>地図</h2>
            <div id="map"></div>
        </div>
    </div>

    <!-- Leaflet JavaScript library -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <!-- Leaflet Routing Machine JavaScript -->
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
    <!-- Custom JavaScript for logic -->
    <script src="script160.js"></script>
</body>
</html>