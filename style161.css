body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 10px;
    background-color: #f4f7f6;
    color: #333;
    font-size: 14px;
}

h1 {
    text-align: center;
    color: #2c3e50;
    margin-bottom: 20px;
    font-size: 2em;
}

h2 {
    color: #34495e;
    border-bottom: 2px solid #ccc;
    padding-bottom: 5px;
    margin-top: 15px;
    margin-bottom: 10px;
    font-size: 1.5em;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
h2 #achievementRate {
    font-size: 0.8em;
    font-weight: normal;
    color: #666;
    margin-left: 10px;
}

/* --- 新しいコントロールパネルとタブのスタイル --- */
.control-panel-container {
    flex: 3; /* 元の station-list-container と同じflex設定 */
    min-width: 300px;
    background-color: #ffffff;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    display: flex; /* 内部コンテンツをflexで配置 */
    flex-direction: column; /* 縦方向に並べる */
    max-height: calc(100vh - 80px); /* 画面高さに合わせて最大高さを設定 */
    overflow-y: auto; /* 内容がはみ出したら縦スクロール */
}

.tabs-header {
    display: flex;
    margin-bottom: 10px;
    border-bottom: 1px solid #ccc;
    /* flex-shrink: 0; */ /* ヘッダーが縮まないようにする (任意) */
}

.tab-button {
    background-color: #f0f0f0;
    border: none;
    padding: 10px 15px;
    cursor: pointer;
    font-size: 1em;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
    margin-right: 2px; /* ボタン間のわずかな隙間 */
    transition: background-color 0.2s, color 0.2s;
    border-bottom: 1px solid #ccc; /* 下線効果 */
}

.tab-button:hover:not(.active) {
    background-color: #e0e0e0;
}

.tab-button.active {
    background-color: #ffffff;
    color: #2c3e50;
    font-weight: bold;
    border-bottom: 2px solid #2c3e50; /* アクティブタブの下線 */
    position: relative;
    z-index: 1; /* アクティブタブを手前に表示 */
}
.tab-button:disabled {
    cursor: not-allowed;
    background-color: #e0e0e0;
    color: #999;
}


.tab-content {
    display: none; /* デフォルトで非表示 */
    padding-top: 5px; /* タブヘッダーからのスペース */
    flex-grow: 1; /* 残りのスペースを埋めるようにコンテンツを拡大 */
    /* overflow-y: auto; */ /* ← 削除: 親要素でスクロールを処理するため */
}

.tab-content.active {
    display: block; /* アクティブタブコンテンツを表示 */
}

.tab-section {
    margin-bottom: 15px;
    padding: 10px;
    background-color: #e8f5e9;
    border-radius: 6px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    display: flex;
    flex-wrap: wrap; /* 要素を折り返す */
    align-items: center;
    gap: 8px; /* 要素間の隙間 */
}

/* リスト表示セクションのためにflex-wrapを解除する場合 */
.tab-section > h3 {
    width: 100%; /* タイトルが1行を占めるように */
    margin-top: 0;
    margin-bottom: 10px;
    color: #34495e;
    font-size: 1.2em;
}
.intermediate-waypoints-list-section { /* 専用のクラスで調整 */
    flex-direction: column;
    align-items: flex-start;
}


.tab-section label {
    font-weight: bold;
    color: #2e7d32;
    white-space: nowrap; /* ラベルを改行させない */
}

.tab-section input[type="file"],
.tab-section button,
.tab-section input[type="number"],
.tab-section select {
    padding: 6px 12px;
    border: 1px solid #ccc;
    border-radius: 4px;
    background-color: #fff;
    cursor: pointer;
    font-size: 0.9em;
    transition: background-color 0.2s;
    box-sizing: border-box;
    flex-grow: 1; /* 要素が拡大するのを許可 */
    min-width: 100px; /* 最小幅を確保 */
}
.tab-section input[type="number"] {
    flex-grow: 0; /* 数字入力フィールドは拡大しない */
    width: 70px; /* 特定の幅を維持 */
}


/* --- ボタンの特定スタイル (元の .controls から移動) --- */
#saveCsvButton {
    background-color: #4CAF50;
    color: white;
    border-color: #4CAF50;
}

#saveCsvButton:hover:not(:disabled) {
    background-color: #45a049;
    border-color: #45a049;
}

#saveCsvButton:disabled {
    background-color: #cccccc;
    color: #666666;
    cursor: not-allowed;
    border-color: #cccccc;
}

#clearRouteButton, #showRouteListButton, #loadRouteCsvButton, #printRouteListButton, #saveRouteCsvButton {
    background-color: #6c757d; 
    color: white;
    border-color: #6c757d;
}

#clearRouteButton:hover:not(:disabled), #showRouteListButton:hover:not(:disabled), #loadRouteCsvButton:hover:not(:disabled), #printRouteListButton:hover:not(:disabled), #saveRouteCsvButton:hover:not(:disabled) {
    background-color: #5a6268;
    border-color: #5a6268;
}

#clearRouteButton:disabled, #showRouteListButton:disabled, #loadRouteCsvButton:disabled, #printRouteListButton:disabled, #saveRouteCsvButton:disabled {
    background-color: #cccccc;
    color: #666666;
    cursor: not-allowed;
    border-color: #cccccc;
}

#setStartModeButton, #setEndModeButton, #addSelectedStationAsWaypointButton, #setWaypointModeButton, #toggleStationMarkersButton { /* 設定ボタン */
    background-color: #007bff; 
    color: white;
    border-color: #007bff;
}
#setStartModeButton:hover:not(:disabled), #setEndModeButton:hover:not(:disabled), #addSelectedStationAsWaypointButton:hover:not(:disabled), #setWaypointModeButton:hover:not(:disabled), #toggleStationMarkersButton:hover:not(:disabled) { /* 設定ボタン */
    background-color: #0056b3;
    border-color: #0056b3;
}
#setStartModeButton:disabled, #setEndModeButton:disabled, #addSelectedStationAsWaypointButton:disabled, #setWaypointModeButton:disabled, #toggleStationMarkersButton:disabled { /* 設定ボタン */
    background-color: #cccccc;
    color: #666666;
    cursor: not-allowed;
    border-color: #cccccc;
}

/* マップモードボタンのアクティブ状態 */
.tab-section button.active { /* tab-section内のボタンに対する特異性 */
    background-color: #ffc107; 
    color: #333;
    border-color: #ffc107;
}
.tab-section button.active:hover {
    background-color: #e0a800;
    border-color: #e0a800;
}

/* 新しい解除ボタンのスタイル */
.clear-route-point-button {
    background-color: #6c757d; /* 灰色 */
    color: white;
    border-color: #6c757d;
    flex-grow: 0; /* 拡大させない */
    min-width: unset; /* 最小幅を解除 */
    width: auto; /* コンテンツに合わせる */
}
.clear-route-point-button:hover:not(:disabled) {
    background-color: #5a6268;
    border-color: #5a6268;
}
.clear-route-point-button:disabled {
    background-color: #cccccc;
    color: #666666;
    cursor: not-allowed;
    border-color: #cccccc;
}

/* マップモードボタンと解除ボタンを横並びにするための調整 */
.tab-section.map-mode-buttons {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px; /* ボタン間の隙間 */
}
.tab-section.map-mode-buttons button {
    flex-grow: 1; /* 設定ボタンは拡大 */
}
.tab-section.map-mode-buttons .clear-route-point-button {
    flex-grow: 0; /* 解除ボタンは固定幅 */
    width: 60px; /* 解除ボタンの幅を調整 */
}


.manual-button { /* 取扱説明書ボタンのスタイル */
    margin-top: 15px;
    width: 100%;
    padding: 8px 15px;
    border: 1px solid #6c757d;
    border-radius: 4px;
    background-color: #6c757d;
    color: white;
    cursor: pointer;
    font-size: 1em;
    transition: background-color 0.2s;
    box-sizing: border-box;
}
.manual-button:hover {
    background-color: #5a6268;
    border-color: #5a6268;
}

/* --- 全体コンテナとマップのスタイル --- */
.container {
    display: flex;
    flex-wrap: wrap; /* 必要に応じて折り返す */
    gap: 15px;
    max-width: 1400px;
    margin: 0 auto;
}

.map-container {
    flex: 7;
    min-width: 700px;
    background-color: #ffffff;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.station-selector { /* 道の駅情報タブ内の特定のセクション */
    margin-bottom: 15px;
}
#stationDropdown {
    width: 100%;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 0.9em;
    background-color: #fff;
    box-sizing: border-box;
}
#stationDropdown:disabled {
    background-color: #eee;
    cursor: not-allowed;
}

#stationDropdown option.visited-option {
    color: #c82333; /* 訪問済み道の駅のオプションテキスト色 */
    font-weight: bold;
}

#stationDetailsDisplay {
    margin-top: 10px;
    padding: 10px;
    border: 1px solid #eee;
    border-radius: 4px;
    background-color: #fcfcfc;
    min-height: 200px;
    overflow-y: auto;
}
#stationDetailsDisplay p {
    margin: 5px 0;
    line-height: 1.5;
    display: flex; /* Flexboxを追加 */
    align-items: baseline; /* 基準線で揃える */
}
#stationDetailsDisplay strong {
    /* display: inline-block; を削除 */
    flex-shrink: 0; /* ラベルが縮まないようにする */
    width: 80px; /* ラベルの幅を固定 */
    color: #555;
    margin-right: 5px; /* ラベルと値の間にスペースを追加 */
}

#stationDetailsDisplay.editing-display {
    background-color: #fff3e0; /* 編集中の背景色 */
}

#stationDetailsDisplay input[type="text"],
#stationDetailsDisplay textarea { /* textareaのスタイルを追加 */
    width: calc(100% - 90px); /* ラベルの幅を考慮 */
    box-sizing: border-box;
    padding: 4px;
    border: 1px solid #ccc;
    border-radius: 3px;
    font-size: 0.9em;
    margin-bottom: 5px;
}
#stationDetailsDisplay textarea {
    min-height: 60px; /* textareaの最小高さを設定 */
    resize: vertical; /* 垂直方向のみリサイズ可能にする */
}


#stationDetailsDisplay .default-date-value {
    color: #888;
    font-style: italic;
}

#stationDetailsDisplay .visited-date-value {
    color: #0056b3;
    font-weight: bold;
}


.action-buttons-for-details {
    margin-top: 15px;
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    flex-wrap: wrap; 
}
.action-buttons-for-details button {
    padding: 6px 12px;
    border: 1px solid #ccc;
    border-radius: 3px;
    cursor: pointer;
    font-size: 0.9em;
    width: 100%; 
    flex-grow: 1; 
}

.action-buttons-for-details button.edit-btn {
    background-color: #007bff;
    color: white;
    border-color: #007bff;
}
.action-buttons-for-details button.edit-btn:hover:not(:disabled) {
    background-color: #0056b3;
}

.action-buttons-for-details button.save-btn {
    background-color: #28a745;
    color: white;
    border-color: #28a745;
}
.action-buttons-for-details button.save-btn:hover:not(:disabled) {
    background-color: #218838;
}

.action-buttons-for-details button.cancel-btn {
    background-color: #dc3545;
    color: white;
    border-color: #dc3545;
}
.action-buttons-for-details button.cancel-btn:hover:not(:disabled) {
    background-color: #c82333;
}

.action-buttons-for-details button:disabled {
    background-color: #cccccc;
    color: #666666;
    cursor: not-allowed;
    border-color: #cccccc;
}


#map {
    height: 450px;
    width: 100%;
    border-radius: 8px;
}

/* --- Intermediate Waypoints List Styling --- */
#intermediateWaypointsList {
    list-style: none;
    padding: 0;
    margin: 5px 0 0 0;
    width: 100%;
    max-height: 200px; /* スクロール可能にするために高さを制限 */
    overflow-y: auto;
    border: 1px solid #ddd;
    border-radius: 4px;
    background-color: #fdfdfd;
}

#intermediateWaypointsList li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 10px;
    border-bottom: 1px solid #eee;
    font-size: 0.9em;
    color: #555;
}

#intermediateWaypointsList li:last-child {
    border-bottom: none;
}

#intermediateWaypointsList li span {
    flex-grow: 1;
    margin-right: 10px;
}

#intermediateWaypointsList .placeholder-item {
    font-style: italic;
    color: #888;
    text-align: center;
    padding: 15px;
}

.remove-waypoint-button {
    background-color: #dc3545;
    color: white;
    border: none;
    border-radius: 3px;
    padding: 4px 8px;
    cursor: pointer;
    font-size: 0.8em;
    transition: background-color 0.2s;
    flex-shrink: 0; /* ボタンが縮まないように */
}

.remove-waypoint-button:hover {
    background-color: #c82333;
}
/* --- End Intermediate Waypoints List Styling --- */


/* --- レスポンシブデザインの調整 (新しいタブ構造に合わせたもの) --- */
@media (max-width: 1200px) {
    .container {
        flex-direction: column; /* 縦並びに変更 */
        gap: 10px;
    }
    .control-panel-container, .map-container {
        flex: none;
        min-width: unset;
        width: 100%;
        padding: 10px;
        max-height: unset; /* カラム表示の際はmax-heightを解除 */
        overflow-y: visible; /* カラム表示の際はoverflow-yを解除 */
    }
    /* `tab-content` の `overflow-y: auto;` をこのメディアクエリで再度有効にする */
    .tab-content {
        overflow-y: auto;
    }
    h1 {
        font-size: 1.8em;
    }
    h2 {
        font-size: 1.3em;
    }
    body {
        padding: 5px;
    }
    .tab-section {
        flex-direction: row; /* デフォルトで横並びを維持 */
        justify-content: flex-start; /* 左寄せ */
        align-items: center;
        gap: 8px;
    }
    /* リスト表示セクションは縦並びに維持 */
    .tab-section > h3 {
        width: 100%;
    }
    #intermediateWaypointsList {
        max-height: 150px; /* レスポンシブでの高さ調整 */
    }
    .tab-section label {
        margin-right: 5px; 
    }
    .tab-section input[type="text"],
    .tab-section input[type="number"],
    .tab-section select,
    #toggleStationMarkersButton { /* 新しいボタンも拡大させる */
        flex-grow: 1; /* 数字入力も拡大させる */
        max-width: unset; /* 最大幅を解除 */
    }
    /* 道の駅詳細表示の最大高さ調整 */
    #stationDetailsDisplay {
        max-height: 250px; /* 例としての高さ、必要に応じて調整 */
    }
}

@media (max-width: 600px) {
    .tabs-header {
        flex-direction: column; /* タブボタンを縦並びにする */
        gap: 2px;
    }
    .tab-button {
        width: 100%;
        margin-right: 0;
        border-radius: 0;
        border-bottom: 1px solid #ccc;
    }
    .tab-button.active {
        border-bottom: 2px solid #2c3e50;
    }
    .tab-section {
        flex-direction: column; /* コントロールを縦並びにする */
        align-items: stretch; /* 均等に引き伸ばす */
    }
    .tab-section label {
        margin-bottom: 5px;
        margin-right: 0;
    }
    .tab-section input[type="file"], .tab-section button, .tab-section input[type="text"], .tab-section input[type="number"], .tab-section select, #toggleStationMarkersButton {
        width: 100%;
        max-width: unset; /* 最大幅を解除 */
    }
    /* 道の駅詳細表示の最大高さ調整 */
    #stationDetailsDisplay {
        max-height: 200px; /* 例としての高さ、必要に応じて調整 */
    }
    .action-buttons-for-details button {
        width: 100%;
        flex-grow: 0; /* 拡大させない */
    }
    .manual-button {
        margin-top: 10px;
    }
}